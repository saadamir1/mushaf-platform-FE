{"version":3,"file":"static/js/624.6a491de6.chunk.js","mappings":"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","sources":["pages/Admin.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { userService } from \"../services/api\";\r\n\r\nconst Admin = () => {\r\n    const { user: currentUser, isAdmin } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [users, setUsers] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(\"\");\r\n    const [success, setSuccess] = useState(\"\");\r\n    const [editingUser, setEditingUser] = useState(null);\r\n    const [actionLoading, setActionLoading] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (!currentUser) {\r\n            navigate(\"/login\");\r\n        } else if (!isAdmin) {\r\n            navigate(\"/\");\r\n        }\r\n    }, [currentUser, isAdmin, navigate]);\r\n\r\n    useEffect(() => {\r\n        if (currentUser && isAdmin) {\r\n            fetchUsers();\r\n        }\r\n    }, [currentUser, isAdmin]);\r\n\r\n    const fetchUsers = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await userService.getAllUsers();\r\n            setUsers(response.data.data || []);\r\n        } catch (err) {\r\n            setError(\"Failed to fetch users\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDeleteUser = async (userId) => {\r\n        // Prevent deleting yourself\r\n        if (userId === currentUser.id) {\r\n            setError(\"You cannot delete your own account\");\r\n            return;\r\n        }\r\n\r\n        if (!window.confirm(\"Are you sure you want to delete this user? This action cannot be undone.\")) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setActionLoading(userId);\r\n            await userService.deleteUser(userId);\r\n            setSuccess(\"User deleted successfully\");\r\n            setUsers(users.filter(u => u.id !== userId));\r\n            setTimeout(() => setSuccess(\"\"), 3000);\r\n        } catch (err) {\r\n            setError(err.response?.data?.message || \"Failed to delete user\");\r\n        } finally {\r\n            setActionLoading(null);\r\n        }\r\n    };\r\n\r\n    const handleRoleChange = async (userId, newRole) => {\r\n        // Prevent changing own role\r\n        if (userId === currentUser.id) {\r\n            setError(\"You cannot change your own role\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setActionLoading(`role-${userId}`);\r\n            await userService.updateUser(userId, { role: newRole });\r\n            setSuccess(`User role changed to ${newRole}`);\r\n            setUsers(users.map(u => u.id === userId ? { ...u, role: newRole } : u));\r\n            setTimeout(() => setSuccess(\"\"), 3000);\r\n        } catch (err) {\r\n            setError(err.response?.data?.message || \"Failed to update role\");\r\n        } finally {\r\n            setActionLoading(null);\r\n        }\r\n    };\r\n\r\n    const handleEditUser = async (userId, firstName, lastName) => {\r\n        try {\r\n            setActionLoading(`edit-${userId}`);\r\n            await userService.updateUser(userId, { firstName, lastName });\r\n            setSuccess(\"User updated successfully\");\r\n            setUsers(users.map(u => u.id === userId ? { ...u, firstName, lastName } : u));\r\n            setEditingUser(null);\r\n            setTimeout(() => setSuccess(\"\"), 3000);\r\n        } catch (err) {\r\n            setError(err.response?.data?.message || \"Failed to update user\");\r\n        } finally {\r\n            setActionLoading(null);\r\n        }\r\n    };\r\n\r\n    if (!currentUser || !isAdmin) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className=\"admin-page\">\r\n            <div className=\"page-header\">\r\n                <h1>Admin Panel</h1>\r\n            </div>\r\n\r\n            <div className=\"admin-card\">\r\n                {(error || success) && (\r\n                    <div className={error ? \"error-message\" : \"success-message\"}>\r\n                        {error || success}\r\n                    </div>\r\n                )}\r\n\r\n                <h2>User Management</h2>\r\n\r\n                {loading ? (\r\n                    <div className=\"loading-state\">Loading users...</div>\r\n                ) : users.length === 0 ? (\r\n                    <div className=\"empty-state\">\r\n                        <p>No users found</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"users-table-container\">\r\n                        <table className=\"users-table\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>ID</th>\r\n                                    <th>Name</th>\r\n                                    <th>Email</th>\r\n                                    <th>Role</th>\r\n                                    <th>Verified</th>\r\n                                    <th>Actions</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {users.map((user) => (\r\n                                    <tr key={user.id}>\r\n                                        <td>{user.id}</td>\r\n                                        <td>\r\n                                            {editingUser === user.id ? (\r\n                                                <div className=\"edit-form\">\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        defaultValue={user.firstName}\r\n                                                        id={`firstName-${user.id}`}\r\n                                                        placeholder=\"First Name\"\r\n                                                    />\r\n                                                    <input\r\n                                                        type=\"text\"\r\n                                                        defaultValue={user.lastName}\r\n                                                        id={`lastName-${user.id}`}\r\n                                                        placeholder=\"Last Name\"\r\n                                                    />\r\n                                                    <button\r\n                                                        className=\"btn btn-sm btn-primary\"\r\n                                                        onClick={() => {\r\n                                                            const firstName = document.getElementById(`firstName-${user.id}`).value;\r\n                                                            const lastName = document.getElementById(`lastName-${user.id}`).value;\r\n                                                            handleEditUser(user.id, firstName, lastName);\r\n                                                        }}\r\n                                                        disabled={actionLoading === `edit-${user.id}`}\r\n                                                    >\r\n                                                        Save\r\n                                                    </button>\r\n                                                    <button\r\n                                                        className=\"btn btn-sm btn-secondary\"\r\n                                                        onClick={() => setEditingUser(null)}\r\n                                                    >\r\n                                                        Cancel\r\n                                                    </button>\r\n                                                </div>\r\n                                            ) : (\r\n                                                `${user.firstName} ${user.lastName}`\r\n                                            )}\r\n                                        </td>\r\n                                        <td>{user.email}</td>\r\n                                        <td>\r\n                                            <select\r\n                                                className=\"role-select\"\r\n                                                value={user.role}\r\n                                                onChange={(e) => handleRoleChange(user.id, e.target.value)}\r\n                                                disabled={actionLoading === `role-${user.id}` || user.id === currentUser.id}\r\n                                                title={user.id === currentUser.id ? \"Cannot change your own role\" : \"Change role\"}\r\n                                            >\r\n                                                <option value=\"user\">User</option>\r\n                                                <option value=\"admin\">Admin</option>\r\n                                            </select>\r\n                                        </td>\r\n                                        <td>\r\n                                            <span className={`status-badge ${user.isEmailVerified ? 'verified' : 'pending'}`}>\r\n                                                {user.isEmailVerified ? 'Yes' : 'No'}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td>\r\n                                            <div className=\"action-buttons\">\r\n                                                <button\r\n                                                    className=\"btn btn-sm btn-outline\"\r\n                                                    onClick={() => setEditingUser(user.id)}\r\n                                                    title=\"Edit user\"\r\n                                                >\r\n                                                    Edit\r\n                                                </button>\r\n                                                <button\r\n                                                    className=\"btn btn-sm btn-danger\"\r\n                                                    onClick={() => handleDeleteUser(user.id)}\r\n                                                    disabled={actionLoading === user.id || user.id === currentUser.id}\r\n                                                    title={user.id === currentUser.id ? \"Cannot delete yourself\" : \"Delete user\"}\r\n                                                >\r\n                                                    {actionLoading === user.id ? \"...\" : \"Delete\"}\r\n                                                </button>\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <style>{`\r\n                .admin-page {\r\n                    padding: 2rem 1rem;\r\n                    max-width: 1400px;\r\n                    margin: 0 auto;\r\n                }\r\n                .admin-card {\r\n                    background: var(--card-bg);\r\n                    border: 2px solid var(--border-color);\r\n                    border-radius: 12px;\r\n                    padding: 2rem;\r\n                }\r\n                .admin-card h2 {\r\n                    margin: 0 0 1.5rem 0;\r\n                    color: var(--secondary-color);\r\n                }\r\n                .users-table-container {\r\n                    overflow-x: auto;\r\n                }\r\n                .users-table {\r\n                    width: 100%;\r\n                    border-collapse: collapse;\r\n                }\r\n                .users-table th,\r\n                .users-table td {\r\n                    padding: 1rem;\r\n                    text-align: left;\r\n                    border-bottom: 1px solid var(--border-color);\r\n                    vertical-align: middle;\r\n                }\r\n                .users-table th {\r\n                    font-weight: 600;\r\n                    color: var(--secondary-color);\r\n                    background: var(--light-color);\r\n                }\r\n                .users-table tr:hover {\r\n                    background: var(--light-color);\r\n                }\r\n                .role-select {\r\n                    padding: 0.375rem 0.75rem;\r\n                    border: 1px solid var(--border-color);\r\n                    border-radius: 4px;\r\n                    background: var(--bg-color);\r\n                    color: var(--text-color);\r\n                    font-size: 0.85rem;\r\n                    cursor: pointer;\r\n                }\r\n                .role-select:disabled {\r\n                    opacity: 0.5;\r\n                    cursor: not-allowed;\r\n                }\r\n                .status-badge {\r\n                    display: inline-block;\r\n                    padding: 0.25rem 0.75rem;\r\n                    border-radius: 4px;\r\n                    font-size: 0.8rem;\r\n                    font-weight: 500;\r\n                }\r\n                .status-badge.verified {\r\n                    background: rgba(40, 167, 69, 0.1);\r\n                    color: #28a745;\r\n                }\r\n                .status-badge.pending {\r\n                    background: rgba(255, 193, 7, 0.1);\r\n                    color: #ffc107;\r\n                }\r\n                .action-buttons {\r\n                    display: flex;\r\n                    gap: 0.5rem;\r\n                }\r\n                .edit-form {\r\n                    display: flex;\r\n                    gap: 0.5rem;\r\n                    align-items: center;\r\n                }\r\n                .edit-form input {\r\n                    padding: 0.375rem 0.5rem;\r\n                    border: 1px solid var(--border-color);\r\n                    border-radius: 4px;\r\n                    font-size: 0.85rem;\r\n                    width: 100px;\r\n                }\r\n                .loading-state {\r\n                    text-align: center;\r\n                    padding: 2rem;\r\n                    color: var(--gray-color);\r\n                }\r\n                .btn-sm {\r\n                    padding: 0.375rem 0.75rem;\r\n                    font-size: 0.8rem;\r\n                }\r\n                .btn-outline {\r\n                    background: transparent;\r\n                    border: 1px solid var(--primary-color);\r\n                    color: var(--primary-color);\r\n                    cursor: pointer;\r\n                    border-radius: 4px;\r\n                }\r\n                .btn-outline:hover {\r\n                    background: var(--primary-color);\r\n                    color: white;\r\n                }\r\n                .btn-outline:disabled {\r\n                    opacity: 0.5;\r\n                    cursor: not-allowed;\r\n                }\r\n                .btn-primary {\r\n                    background: var(--primary-color);\r\n                    color: white;\r\n                    border: none;\r\n                    cursor: pointer;\r\n                    border-radius: 4px;\r\n                }\r\n                .btn-primary:hover {\r\n                    background: var(--primary-dark);\r\n                }\r\n                .btn-primary:disabled {\r\n                    opacity: 0.5;\r\n                    cursor: not-allowed;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Admin;\r\n"],"names":["Admin","user","currentUser","isAdmin","useAuth","navigate","useNavigate","users","setUsers","useState","loading","setLoading","error","setError","success","setSuccess","editingUser","setEditingUser","actionLoading","setActionLoading","useEffect","fetchUsers","async","response","userService","getAllUsers","data","err","_jsxs","className","children","_jsx","length","map","id","type","defaultValue","firstName","placeholder","lastName","onClick","document","getElementById","value","userId","updateUser","u","setTimeout","_err$response3","_err$response3$data","message","handleEditUser","disabled","email","role","onChange","e","newRole","_err$response2","_err$response2$data","handleRoleChange","target","title","isEmailVerified","window","confirm","deleteUser","filter","_err$response","_err$response$data","handleDeleteUser"],"sourceRoot":""}