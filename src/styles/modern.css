/* ============================================
   MODERN.CSS — Mushaf Platform
   Sections: Layout · Search · Surah Cards ·
   Auth · Navbar · Mobile · Profile · Feedback
   ============================================ */

/* ── CSS CUSTOM PROPS used throughout ──────── */
/* --primary-color, --primary-dark, --accent-color,
   --secondary-color, --text-color, --gray-color,
   --card-bg, --bg-color, --light-color,
   --border-color, --danger-color, --transition   */


/* ============================================
   1. HOME PAGE LAYOUT
   ============================================ */
.home-container { padding: 2rem 0; }

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 2rem;
  gap: 2rem;
}
.page-header h1 { margin: 0; font-size: 2rem; color: var(--secondary-color); }
.subtitle { color: var(--gray-color); margin: 0.5rem 0 0; font-size: 1rem; }

/* Stats badge (top-right of header) */
.stats-badge {
  display: flex;
  flex-direction: column;
  align-items: center;
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
  color: white;
  padding: 1rem 1.5rem;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(13, 115, 119, 0.2);
}
.stat-number { font-size: 2rem; font-weight: 700; line-height: 1; }
.stat-label  { font-size: 0.875rem; opacity: 0.9; margin-top: 0.25rem; }


/* ============================================
   2. SEARCH BAR
   ============================================ */
.search-container { margin-bottom: 2rem; }
.search-wrapper   { position: relative; display: flex; align-items: center; }

.search-icon  { position: absolute; left: 1rem; font-size: 1.25rem; pointer-events: none; }
.search-clear {
  position: absolute; right: 1rem;
  background: none; border: none;
  color: var(--gray-color); cursor: pointer;
  font-size: 1.25rem; padding: 0.25rem;
  transition: var(--transition);
}
.search-clear:hover { color: var(--danger-color); }

.search-input {
  width: 100%;
  padding: 1rem 1rem 1rem 3rem;
  border: 2px solid var(--border-color);
  border-radius: 12px;
  font-size: 1rem;
  background-color: var(--card-bg);
  color: var(--text-color);
  transition: all 0.3s ease;
}
.search-input:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 4px rgba(13, 115, 119, 0.1);
}


/* ============================================
   3. SURAH GRID & CARDS
   ============================================ */
.surah-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 1.5rem;
}

.surah-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1.5rem;
  background-color: var(--card-bg);
  border: 2px solid var(--border-color);
  border-radius: 12px;
  text-decoration: none;
  color: inherit;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}
/* Animated left accent bar */
.surah-card::before {
  content: '';
  position: absolute; top: 0; left: 0;
  width: 4px; height: 100%;
  background: linear-gradient(180deg, var(--primary-color), var(--accent-color));
  transform: scaleY(0);
  transition: transform 0.3s ease;
}
.surah-card:hover {
  border-color: var(--primary-color);
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(13, 115, 119, 0.15);
}
.surah-card:hover::before { transform: scaleY(1); }

/* Numbered badge */
.surah-number {
  flex-shrink: 0;
  width: 48px; height: 48px;
  display: flex; align-items: center; justify-content: center;
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
  color: white;
  border-radius: 10px;
  font-weight: 700; font-size: 1.125rem;
}

.surah-content   { flex: 1; }
.surah-name      { margin: 0 0 0.5rem; font-size: 1.125rem; color: var(--secondary-color); }
.surah-arabic    { margin: 0 0 0.75rem; font-size: 1.25rem; color: var(--text-color); font-weight: 500; }
.surah-arrow     { flex-shrink: 0; font-size: 1.5rem; color: var(--primary-color); transition: transform 0.3s ease; }
.surah-card:hover .surah-arrow { transform: translateX(4px); }

/* Meta badges (verses count, revelation type) */
.surah-meta  { display: flex; gap: 0.5rem; flex-wrap: wrap; }
.meta-badge  {
  display: inline-flex; align-items: center; gap: 0.25rem;
  padding: 0.25rem 0.75rem;
  background-color: var(--light-color); color: var(--gray-color);
  border-radius: 6px; font-size: 0.875rem;
}
.meta-badge.revelation {
  background-color: rgba(13, 115, 119, 0.1);
  color: var(--primary-color); font-weight: 500;
}

/* Skeleton loading state */
.surah-card.skeleton { pointer-events: none; animation: pulse 1.5s ease-in-out infinite; }
.skeleton-line {
  height: 20px;
  background: linear-gradient(90deg, var(--border-color) 25%, var(--light-color) 50%, var(--border-color) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px; margin-bottom: 0.5rem;
}
.skeleton-line.short { width: 60%; }
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

/* Empty / no-results state */
.empty-state { text-align: center; padding: 4rem 2rem; }
.empty-icon  { font-size: 4rem; margin-bottom: 1rem; opacity: 0.5; }
.empty-state h3 { color: var(--secondary-color); margin-bottom: 0.5rem; }
.empty-state p  { color: var(--gray-color); }


/* ============================================
   4. AUTH PAGES (Login / Register)
   ============================================ */
.auth-card.modern { max-width: 420px; padding: 2.5rem; }
.auth-icon        { font-size: 3rem; text-align: center; margin-bottom: 1rem; }
.auth-logo        { display: block; margin: 0 auto 1rem; width: 64px; height: 64px; }
.auth-subtitle    { text-align: center; color: var(--gray-color); margin-bottom: 2rem; font-size: 0.95rem; }
.auth-form        { margin-bottom: 2rem; }
.auth-form .btn   { width: 100%; }

/* Show/hide password toggle */
.password-wrapper { position: relative; display: flex; align-items: center; }
.password-wrapper input { flex: 1; padding-right: 2.75rem; }
.password-toggle {
  position: absolute; right: 0.75rem; top: 50%; transform: translateY(-50%);
  background: none; border: none; cursor: pointer;
  font-size: 1.1rem; color: var(--gray-color);
  padding: 0.25rem; transition: var(--transition);
  display: flex; align-items: center; justify-content: center;
}
.password-toggle:hover { color: var(--primary-color); }

/* Remember me + forgot password row */
.form-options {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  flex-wrap: wrap; gap: 0.5rem;
}
.form-options a { color: var(--primary-color); text-decoration: none; font-size: 0.9rem; }
.form-options a:hover { text-decoration: underline; }
.checkbox-label { display: flex; align-items: center; gap: 0.5rem; cursor: pointer; user-select: none; }
.checkbox-label input[type="checkbox"] { width: auto; cursor: pointer; }
@media (max-width: 400px) {
  .form-options { flex-direction: column; align-items: flex-start; }
}

/* Button loading spinner */
.btn-loader {
  display: inline-block;
  width: 16px; height: 16px;
  border: 2px solid rgba(255,255,255,0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
  margin-right: 0.5rem;
}

/* Demo credentials display */
.demo-label { text-align: center; color: var(--gray-color); font-size: 0.875rem; margin-bottom: 1rem; font-weight: 600; }
.demo-credentials { background-color: var(--light-color); border-radius: 8px; padding: 1rem; }
.credential-item { display: flex; justify-content: space-between; padding: 0.5rem 0; }
.credential-item:not(:last-child) { border-bottom: 1px solid var(--border-color); }
.credential-label { color: var(--gray-color); font-size: 0.875rem; }
.credential-value { color: var(--secondary-color); font-weight: 600; font-size: 0.875rem; font-family: 'Courier New', monospace; }


/* ============================================
   5. NAVBAR (Desktop)
   ============================================ */
.navbar {
  background-color: var(--card-bg);
  border-bottom: 1px solid var(--border-color);
  position: sticky; top: 0; z-index: 1000; width: 100%;
}
.navbar-container {
  max-width: 1200px; margin: 0 auto; padding: 0 1.5rem;
  display: flex; align-items: center; justify-content: space-between;
  height: 64px; gap: 1rem;
}

/* Brand / logo */
.navbar-brand { display: flex; align-items: center; flex-shrink: 0; }
.brand-link   { display: flex; align-items: center; gap: 0.5rem; text-decoration: none; color: inherit; }
.brand-link:hover { opacity: 0.8; }
.nav-logo     { height: 36px; width: auto; }
.brand-text   { font-weight: 700; font-size: 1.25rem; color: var(--secondary-color); }

/* Hamburger (hidden on desktop, shown on mobile) */
.hamburger {
  display: none;
  flex-direction: column; justify-content: center; align-items: center;
  gap: 5px; width: 40px; height: 40px; padding: 0;
  background: transparent; border: none; cursor: pointer;
  border-radius: 8px; transition: background-color 0.2s ease; flex-shrink: 0;
}
.hamburger:hover { background-color: var(--light-color); }
.hamburger span { display: block; width: 22px; height: 2px; background-color: var(--text-color); border-radius: 2px; transition: all 0.3s ease; transform-origin: center; }
.hamburger.active span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
.hamburger.active span:nth-child(2) { opacity: 0; transform: scaleX(0); }
.hamburger.active span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

/* Nav links */
.navbar-menu { display: flex; align-items: center; justify-content: space-between; flex: 1; gap: 1rem; }
.nav-links   { display: flex; align-items: center; gap: 0.25rem; list-style: none; margin: 0; padding: 0; }

.nav-link {
  display: flex; align-items: center; gap: 0.4rem;
  padding: 0.5rem 0.875rem; border-radius: 8px;
  text-decoration: none; color: var(--text-color);
  font-weight: 500; font-size: 0.95rem;
  transition: background-color 0.2s ease, color 0.2s ease;
  white-space: nowrap; position: relative;
}
.nav-link:hover  { background-color: var(--light-color); color: var(--primary-color); }
.nav-link.active { color: var(--primary-color); background-color: transparent; }
/* Active underline indicator */
.nav-link.active::after {
  content: ''; position: absolute; bottom: -2px; left: 50%;
  transform: translateX(-50%); width: 50%; height: 2px;
  background-color: var(--primary-color); border-radius: 2px;
}
.nav-icon { font-size: 1rem; line-height: 1; }

/* Right-side actions area */
.navbar-actions { display: flex; align-items: center; gap: 0.5rem; flex-shrink: 0; }

/* Theme toggle button */
.theme-toggle {
  display: flex; align-items: center; justify-content: center;
  width: 38px; height: 38px;
  border-radius: 50%; border: none; background: transparent;
  cursor: pointer; font-size: 1.2rem; color: var(--text-color);
  transition: background-color 0.2s ease; flex-shrink: 0;
}
.theme-toggle:hover { background-color: var(--light-color); }

/* User dropdown trigger */
.user-dropdown { position: relative; flex-shrink: 0; }
.user-toggle {
  display: flex; align-items: center; gap: 0.5rem;
  padding: 0.375rem 0.75rem 0.375rem 0.375rem;
  border-radius: 50px; border: 2px solid var(--border-color);
  background-color: var(--card-bg); cursor: pointer;
  transition: border-color 0.2s ease; white-space: nowrap;
}
.user-toggle:hover { border-color: var(--primary-color); }
.user-avatar {
  width: 30px; height: 30px; border-radius: 50%;
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
  color: white; display: flex; align-items: center; justify-content: center;
  font-size: 0.7rem; font-weight: 700; flex-shrink: 0; letter-spacing: 0.5px;
}
.user-name-nav  { font-weight: 500; font-size: 0.9rem; color: var(--text-color); }
.dropdown-arrow { font-size: 0.55rem; color: var(--gray-color); transition: transform 0.2s ease; margin-left: 0.125rem; }
.dropdown-arrow.open { transform: rotate(180deg); }

/* Dropdown panel */
.dropdown-menu {
  position: absolute; top: calc(100% + 0.625rem); right: 0;
  min-width: 230px;
  background-color: var(--card-bg);
  border: 1px solid var(--border-color); border-radius: 12px;
  box-shadow: 0 12px 40px rgba(0,0,0,0.18);
  overflow: hidden; z-index: 1100;
  animation: dropdownFade 0.18s ease;
}
@keyframes dropdownFade { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } }

.dropdown-header {
  padding: 1rem 1rem 0.875rem;
  background-color: var(--light-color);
  border-bottom: 1px solid var(--border-color);
}
.dropdown-name  { font-weight: 600; font-size: 0.95rem; color: var(--secondary-color); margin-bottom: 0.2rem; }
.dropdown-email { font-size: 0.8rem; color: var(--gray-color); margin-bottom: 0.5rem; word-break: break-all; }
.dropdown-role  {
  display: inline-block; padding: 0.2rem 0.5rem;
  background-color: rgba(13,115,119,0.12); color: var(--primary-color);
  border-radius: 4px; font-size: 0.72rem; font-weight: 600;
  text-transform: capitalize; letter-spacing: 0.3px;
}
.dropdown-divider { height: 1px; background-color: var(--border-color); }

.dropdown-item {
  display: flex; align-items: center; gap: 0.75rem;
  width: 100%; padding: 0.75rem 1rem;
  border: none; background: none; text-align: left; text-decoration: none;
  color: var(--text-color); font-size: 0.9rem; cursor: pointer;
  transition: background-color 0.15s ease; font-family: inherit;
}
.dropdown-item:hover        { background-color: var(--light-color); }
.dropdown-item.logout       { color: var(--danger-color); }
.dropdown-item.logout:hover { background-color: rgba(214,40,40,0.08); }

/* Guest (logged-out) nav links */
.guest-links { display: flex; align-items: center; gap: 0.5rem; }


/* ============================================
   6. MOBILE NAVBAR  (≤768px)
   ============================================ */
@media (max-width: 768px) {
  .hamburger { display: flex; }

  .navbar-container { padding: 0 1rem; height: 60px; }

  /* Slide-down mobile menu */
  .navbar-menu {
    display: none;
    position: absolute; top: 60px; left: 0; right: 0;
    flex-direction: column; align-items: stretch;
    background-color: var(--card-bg);
    border-bottom: 2px solid var(--border-color);
    padding: 0.75rem 1rem 1rem;
    gap: 0.5rem;
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    z-index: 999;
  }
  .navbar-menu.active { display: flex; }

  .nav-links {
    flex-direction: column; align-items: stretch;
    width: 100%; gap: 0.125rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
  }
  .nav-link { width: 100%; padding: 0.75rem 0.875rem; font-size: 1rem; }
  .nav-link.active::after { display: none; }
  .nav-link.active { background-color: rgba(13,115,119,0.08); }

  .navbar-actions { display: flex; align-items: center; justify-content: space-between; width: 100%; padding-top: 0.5rem; }
  .user-dropdown  { flex: 1; display: flex; justify-content: flex-end; }
  .dropdown-menu  { position: absolute; top: calc(100% + 0.5rem); right: 0; min-width: 240px; max-width: calc(100vw - 2rem); }

  .guest-links { flex-direction: column; width: 100%; gap: 0.5rem; padding-top: 0.5rem; }
  .guest-links .nav-link,
  .guest-links .btn { width: 100%; text-align: center; justify-content: center; }

  /* Home page mobile tweaks */
  .home-container { padding: 1rem 0; }
  .page-header    { flex-direction: column; gap: 1rem; }
  .page-header h1 { font-size: 1.5rem; }
  .stats-badge    { align-self: flex-start; padding: 0.75rem 1.25rem; }
  .stat-number    { font-size: 1.5rem; }
  .surah-grid     { grid-template-columns: 1fr; gap: 1rem; }
  .surah-card     { padding: 1rem; }
  .surah-number   { width: 40px; height: 40px; font-size: 1rem; }
  .surah-name     { font-size: 1rem; }
  .surah-arabic   { font-size: 1.125rem; }
  .search-input   { padding: 0.875rem 0.875rem 0.875rem 2.75rem; font-size: 0.95rem; }
  .search-icon    { left: 0.875rem; font-size: 1.125rem; }
  .auth-card.modern { padding: 2rem 1.5rem; }
  .auth-icon      { font-size: 2.5rem; }
}


/* ============================================
   7. PROFILE PAGE
   ============================================ */
.profile-page { max-width: 700px; margin: 0 auto; padding: 2rem 1rem; }
.profile-card { background-color: var(--card-bg); border: 2px solid var(--border-color); border-radius: 12px; padding: 2rem; }

.profile-header {
  display: flex; align-items: center; gap: 1.5rem;
  margin-bottom: 2rem; padding-bottom: 2rem;
  border-bottom: 1px solid var(--border-color);
}
.profile-avatar-large {
  width: 80px; height: 80px; border-radius: 50%;
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
  color: white; display: flex; align-items: center; justify-content: center;
  font-size: 1.75rem; font-weight: 700; flex-shrink: 0;
}
.profile-details h2  { margin: 0 0 0.25rem; font-size: 1.5rem; color: var(--secondary-color); }
.profile-details p   { margin: 0 0 0.5rem; color: var(--gray-color); }
.profile-details .badge {
  display: inline-block; padding: 0.25rem 0.75rem;
  background-color: rgba(13,115,119,0.1); color: var(--primary-color);
  border-radius: 6px; font-size: 0.875rem; font-weight: 500;
}

/* Form sections */
.profile-form-section { margin-bottom: 2rem; }
.profile-form-section:last-child { margin-bottom: 0; }
.profile-form-section h3 { font-size: 1.125rem; color: var(--secondary-color); margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--border-color); }

.profile-form .form-row    { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
.profile-form .form-group  { margin-bottom: 1rem; }
.profile-form label        { display: block; margin-bottom: 0.5rem; font-weight: 500; color: var(--secondary-color); }
.profile-form input[type="text"],
.profile-form input[type="email"],
.profile-form input[type="password"] {
  width: 100%; padding: 0.75rem 1rem;
  border: 2px solid var(--border-color); border-radius: 8px;
  font-size: 1rem; background-color: var(--bg-color); color: var(--text-color);
  transition: all 0.3s ease;
}
.profile-form input:focus          { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(13,115,119,0.1); }
.profile-form input:disabled,
.profile-form input.disabled       { background-color: var(--light-color); cursor: not-allowed; }
.profile-form small                { display: block; margin-top: 0.25rem; color: var(--gray-color); font-size: 0.875rem; }
.profile-form .btn                 { margin-top: 0.5rem; }

/* Button variants */
.btn-secondary { background-color: var(--light-color); color: var(--secondary-color); border: 2px solid var(--border-color); }
.btn-secondary:hover { background-color: var(--border-color); }
.btn-danger    { background-color: var(--danger-color); color: white; border: none; }
.btn-danger:hover    { background-color: #c82333; }
.btn-danger:disabled, .btn-outline:disabled { opacity: 0.6; cursor: not-allowed; }
.btn-outline   { background-color: transparent; color: var(--primary-color); border: 2px solid var(--primary-color); }
.btn-outline:hover   { background-color: var(--primary-color); color: white; }
.btn-sm        { padding: 0.5rem 1rem; font-size: 0.875rem; }

/* Resend verification section */
.resend-section { text-align: center; margin: 1.5rem 0; padding: 1rem; background-color: var(--light-color); border-radius: 8px; }
.resend-text    { margin: 0 0 0.75rem; font-size: 0.9rem; color: var(--gray-color); }
.resend-link    { background: none; border: none; color: var(--primary-color); cursor: pointer; font-size: 0.9rem; text-decoration: underline; margin-left: 0.5rem; }
.resend-link:hover    { color: var(--primary-dark); }
.resend-link:disabled { opacity: 0.6; cursor: not-allowed; }

@media (max-width: 768px) {
  .profile-page { padding: 1rem; }
  .profile-card { padding: 1.5rem; }
  .profile-header { flex-direction: column; text-align: center; }
  .profile-form .form-row { grid-template-columns: 1fr; }
}


/* ============================================
   8. FEEDBACK: Alerts, Success, Error Boundary
   ============================================ */

/* Inline alert banners */
.error-message   { background-color: rgba(220,53,69,0.1); border: 1px solid var(--danger-color); color: var(--danger-color); padding: 0.75rem 1rem; border-radius: 8px; margin-bottom: 1rem; font-size: 0.9rem; }
.success-message { background-color: rgba(40,167,69,0.1); border: 1px solid #28a745; color: #28a745; padding: 0.75rem 1rem; border-radius: 8px; margin-bottom: 1rem; font-size: 0.9rem; }

/* Full-screen error boundary overlay */
.robust-error-boundary {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  min-height: 100vh; padding: 2rem; text-align: center;
  background-color: var(--bg-color);
  position: fixed; inset: 0; z-index: 9999; overflow: auto;
}
.error-card {
  background-color: var(--card-bg); padding: 2rem; border-radius: 12px;
  max-width: 600px; width: 100%;
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
  border: 1px solid var(--border-color);
}
.error-icon        { font-size: 3rem; line-height: 1; display: block; margin-bottom: 1rem; }
.error-title       { margin: 0 0 0.5rem; font-size: 1.5rem; color: var(--secondary-color); font-weight: 700; }
.error-description { margin: 0 0 1.5rem; color: var(--gray-color); line-height: 1.5; }

/* Collapsible technical details */
.error-details { margin-bottom: 1.5rem; padding: 1rem; background-color: var(--bg-color); border-radius: 6px; border: 1px solid var(--border-color); text-align: left; }
.error-details summary { cursor: pointer; font-weight: bold; color: var(--text-color); margin-bottom: 0.5rem; display: block; }
.error-details pre { font-size: 0.75rem; color: var(--text-secondary); white-space: pre-wrap; margin: 0; }
.error-details p   { margin: 0 0 0.5rem; font-size: 0.875rem; }
.error-details strong { color: var(--secondary-color); }

/* Error action buttons */
.error-actions { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-bottom: 1.5rem; }
.error-btn {
  padding: 0.75rem 1.5rem; border: none; border-radius: 6px;
  cursor: pointer; font-weight: 600; font-size: 0.875rem;
  transition: all 0.2s ease; text-decoration: none;
  display: inline-block; text-align: center; min-width: 120px;
}
.error-btn.primary   { background-color: var(--primary-color); color: white; box-shadow: 0 2px 4px rgba(13,115,119,0.3); }
.error-btn.primary:hover { background-color: var(--primary-dark); transform: translateY(-1px); box-shadow: 0 4px 8px rgba(13,115,119,0.4); }
.error-btn.secondary { background-color: transparent; color: var(--text-color); border: 1px solid var(--border-color); }
.error-btn.secondary:hover { background-color: var(--light-color); border-color: var(--primary-color); color: var(--primary-color); }
.error-btn.success   { background-color: var(--success-color); color: white; }
.error-btn.success:hover { background-color: #1e7e34; transform: translateY(-1px); }
.error-btn:disabled  { opacity: 0.6; cursor: not-allowed; transform: none; }
.error-support { font-size: 0.875rem; color: var(--gray-color); opacity: 0.8; margin: 0; }

@media (max-width: 768px) {
  .robust-error-boundary { padding: 1rem; }
  .error-card  { padding: 1.5rem; }
  .error-title { font-size: 1.25rem; }
  .error-icon  { font-size: 2.5rem; }
  .error-actions { flex-direction: column; align-items: center; gap: 0.75rem; }
  .error-btn   { width: 100%; max-width: 280px; }
}

/* =====================================================
   HOME TABS  — append to modern.css
   ===================================================== */
.home-tabs { display:flex; border-bottom:2px solid var(--border-color); margin-bottom:2rem; }
.home-tab-btn {
  display:inline-flex; align-items:center; gap:.45rem;
  padding:.7rem 1.5rem; border:none; border-bottom:3px solid transparent;
  background:transparent; color:var(--gray-color);
  font:600 .95rem/1 inherit; cursor:pointer;
  margin-bottom:-2px; transition:color .2s,border-color .2s;
}
.home-tab-btn:hover  { color:var(--primary-color); }
.home-tab-btn.active { color:var(--primary-color); border-bottom-color:var(--primary-color); }
.tab-content { animation:tabIn .2s ease; }
@keyframes tabIn { from{opacity:0;transform:translateY(4px)} to{opacity:1;transform:none} }

/* Page badge on surah cards */
.meta-badge--page { background:rgba(13,115,119,.12)!important; color:var(--primary-color)!important; font-weight:600; }


/* =====================================================
   QURAN READER
   ===================================================== */

/* Outer shell */
.qr-wrap {
  display:flex; flex-direction:column;
  background:var(--card-bg); border:1px solid var(--border-color);
  border-radius:14px; overflow:hidden;
  box-shadow:0 4px 20px rgba(0,0,0,.08);
  /* KEY: fixed height so the reader doesn't make the whole page scroll */
  height: calc(100vh - 180px);
  min-height: 600px;
  position:relative;
}

/* ── Toolbar ── */
.qr-bar {
  display:flex; align-items:center; justify-content:space-between;
  padding:.6rem 1rem; gap:.5rem; flex-wrap:wrap;
  background:var(--card-bg); border-bottom:1px solid var(--border-color);
  flex-shrink:0;
}
.qr-bar-l { display:flex; align-items:center; gap:.5rem; flex-wrap:wrap; flex:1; min-width:0; }
.qr-bar-r { display:flex; align-items:center; gap:.5rem; flex-shrink:0; }

.qr-ham {
  width:34px; height:34px; display:flex; align-items:center; justify-content:center;
  border:1.5px solid var(--border-color); border-radius:7px;
  background:transparent; color:var(--text-color); font-size:1rem; cursor:pointer;
  transition:.2s; flex-shrink:0;
}
.qr-ham:hover,.qr-ham.on { border-color:var(--primary-color); color:var(--primary-color); background:rgba(13,115,119,.08); }

.qr-pills { display:flex; gap:.25rem; }
.qr-pill {
  display:inline-flex; align-items:center; gap:.3rem;
  padding:.3rem .8rem; border:1.5px solid var(--border-color); border-radius:20px;
  background:transparent; color:var(--gray-color);
  font:.83rem/1 inherit; font-weight:500; cursor:pointer; white-space:nowrap;
  transition:.2s;
}
.qr-pill:hover { border-color:var(--primary-color); color:var(--primary-color); }
.qr-pill.on    { background:var(--primary-color); border-color:var(--primary-color); color:#fff; }
.qr-cnt {
  min-width:17px; height:17px; padding:0 3px;
  background:var(--accent-color); color:#111;
  border-radius:9px; font-size:.68rem; font-weight:700;
  display:inline-flex; align-items:center; justify-content:center;
}

.qr-cur-surah {
  display:flex; align-items:center; gap:.35rem;
  padding:.25rem .7rem; background:rgba(13,115,119,.08);
  border-radius:20px; color:var(--primary-color); overflow:hidden;
}
.qr-cs-badge {
  width:22px; height:22px; border-radius:50%;
  background:var(--primary-color); color:#fff;
  font:.68rem/22px inherit; font-weight:700;
  text-align:center; flex-shrink:0;
}
.qr-cs-en { font-size:.83rem; font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:120px; }
.qr-cs-ar { font-size:.95rem; flex-shrink:0; }

/* Zoom + rotate tool group */
.qr-tools {
  display:flex; align-items:center; gap:.2rem;
  background:var(--bg-color); border:1.5px solid var(--border-color);
  border-radius:8px; padding:.15rem .35rem;
}
.qr-tbtn {
  width:28px; height:26px; border:none; border-radius:5px;
  background:transparent; color:var(--text-color);
  font:.78rem/1 monospace; font-weight:700; cursor:pointer; transition:.15s;
  display:flex; align-items:center; justify-content:center;
}
.qr-tbtn:hover:not(:disabled) { background:var(--primary-color); color:#fff; }
.qr-tbtn:disabled  { opacity:.35; cursor:not-allowed; }
.qr-tbtn:last-child,.qr-tbtn:nth-last-child(2) { font-family:inherit; font-size:1rem; }
.qr-zlbl { font-size:.78rem; color:var(--gray-color); min-width:36px; text-align:center; }

.qr-bm-btn-main {
  padding:.35rem .8rem; border:1.5px solid var(--border-color); border-radius:8px;
  background:transparent; color:var(--gray-color);
  font:.83rem/1 inherit; font-weight:500; cursor:pointer; white-space:nowrap; transition:.2s;
}
.qr-bm-btn-main:hover { border-color:var(--primary-color); color:var(--primary-color); }
.qr-bm-btn-main.on    { border-color:var(--accent-color); color:var(--accent-color); background:rgba(252,163,17,.1); }

/* ── Progress ── */
.qr-prog-bar  { height:3px; background:var(--border-color); flex-shrink:0; }
.qr-prog-fill { height:100%; background:linear-gradient(90deg,var(--primary-color),var(--accent-color)); transition:width .4s; }
.qr-prog-lbl  { font-size:.72rem; color:var(--gray-color); text-align:right; padding:.2rem .875rem; background:var(--bg-color); border-bottom:1px solid var(--border-color); flex-shrink:0; }

/* ── Body: sidebar + pane ── */
.qr-body {
  display:flex; flex:1; min-height:0; /* critical: allows children to scroll */
}

/* Sidebar */
.qr-sidebar {
  width:260px; flex-shrink:0;
  border-right:1px solid var(--border-color);
  overflow-y:auto; background:var(--bg-color);
  scrollbar-width:thin; scrollbar-color:var(--border-color) transparent;
}
.qr-sidebar-inner { display:flex; flex-direction:column; height:100%; }
.qr-sidebar-title {
  position:sticky; top:0; z-index:2;
  padding:.6rem .875rem; font:.72rem/1 inherit; font-weight:700;
  color:var(--gray-color); text-transform:uppercase; letter-spacing:.06em;
  background:var(--bg-color); border-bottom:1px solid var(--border-color); flex-shrink:0;
}

/* Surah rows */
.qr-surah-list { overflow-y:auto; flex:1; padding:.2rem 0; }
.qr-surah-row {
  display:flex; align-items:center; gap:.5rem; width:100%;
  padding:.55rem .875rem; border:none; border-left:3px solid transparent;
  background:transparent; text-align:left; cursor:pointer;
  font-family:inherit; transition:.15s;
}
.qr-surah-row:hover  { background:var(--light-color); }
.qr-surah-row.active { background:rgba(13,115,119,.09); border-left-color:var(--primary-color); }
.qr-s-num {
  width:24px; height:24px; border-radius:6px; flex-shrink:0;
  background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));
  color:#fff; font:.68rem/24px inherit; font-weight:700; text-align:center;
}
.qr-s-info { flex:1; display:flex; flex-direction:column; gap:.1rem; min-width:0; }
.qr-s-en   { font-size:.8rem; font-weight:500; color:var(--text-color); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.qr-s-ar   { font-size:.9rem; color:var(--secondary-color); }
.qr-s-pg   { font-size:.68rem; color:var(--gray-color); flex-shrink:0; }

/* Bookmark list */
.qr-panel-empty { display:flex; flex-direction:column; align-items:center; gap:.4rem; padding:2rem 1rem; text-align:center; color:var(--gray-color); }
.qr-panel-empty span { font-size:1.75rem; }
.qr-panel-empty p    { margin:0; font-size:.85rem; }
.qr-panel-empty small{ opacity:.7; font-size:.78rem; }
.qr-bm-list  { padding:.25rem 0; overflow-y:auto; }
.qr-bm-row   { display:flex; align-items:center; gap:.4rem; padding:.55rem .875rem; border-bottom:1px solid var(--border-color); }
.qr-bm-pg    { font-size:.83rem; font-weight:600; color:var(--secondary-color); flex:1; }
.qr-bm-note  { font-size:.75rem; color:var(--gray-color); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:80px; }
.qr-bm-btns  { display:flex; gap:.25rem; flex-shrink:0; }
.qr-bm-btn   { padding:.22rem .5rem; border:1.5px solid var(--border-color); border-radius:5px; background:transparent; color:var(--text-color); font:.75rem/1 inherit; cursor:pointer; transition:.15s; }
.qr-bm-btn.go:hover  { background:var(--primary-color); color:#fff; border-color:var(--primary-color); }
.qr-bm-btn.del:hover { background:var(--danger-color);  color:#fff; border-color:var(--danger-color); }

/* ── Reading pane ── */
.qr-pane {
  flex:1; min-width:0;
  display:flex; flex-direction:column;
  overflow:hidden;            /* pane itself doesn't scroll */
  background:var(--bg-color);
}

/* Nav rows */
.qr-nav-row {
  display:flex; align-items:center; justify-content:center;
  gap:.625rem; padding:.625rem 1rem; flex-wrap:wrap; flex-shrink:0;
}
.qr-nav-btn {
  padding:.45rem 1.1rem; border:1.5px solid var(--border-color); border-radius:7px;
  background:var(--card-bg); color:var(--text-color);
  font:.88rem/1 inherit; font-weight:600; cursor:pointer; transition:.2s;
}
.qr-nav-btn:hover:not(:disabled) { background:var(--primary-color); color:#fff; border-color:var(--primary-color); }
.qr-nav-btn:disabled  { opacity:.4; cursor:not-allowed; }
.qr-pg-wrap { display:flex; align-items:center; gap:.4rem; }
.qr-pg-lbl  { font-size:.83rem; color:var(--gray-color); }
.qr-pg-in   {
  width:62px; padding:.38rem .5rem; text-align:center;
  border:1.5px solid var(--border-color); border-radius:6px;
  background:var(--card-bg); color:var(--text-color);
  font:.88rem/1 inherit; transition:border-color .2s;
}
.qr-pg-in:focus { outline:none; border-color:var(--primary-color); box-shadow:0 0 0 3px rgba(13,115,119,.1); }
.qr-go-btn  {
  padding:.38rem .8rem; border:none; border-radius:6px;
  background:var(--primary-color); color:#fff;
  font:.83rem/1 inherit; font-weight:600; cursor:pointer; transition:.2s;
}
.qr-go-btn:hover { background:var(--primary-dark); }

/* ── Image box: fills available space, centers image, scrollable when zoomed ── */
.qr-img-box {
  flex:1; min-height:0;          /* takes remaining height in pane */
  overflow:auto;                 /* scroll when zoomed > 100% */
  display:flex; align-items:flex-start; justify-content:center;
  padding:1rem;
  position:relative;
  scrollbar-width:thin; scrollbar-color:var(--border-color) transparent;
}
/* When rotated, allow more vertical scroll room */
.qr-img-box.rotated { align-items:center; }

.qr-img {
  display:block; max-width:100%; height:auto;
  border-radius:6px; opacity:0;
  box-shadow:0 4px 16px rgba(0,0,0,.15);
  /* transform applied inline — scale + rotate */
}
.qr-img.ready { opacity:1; }

/* Dark mode: invert white-paper pages */
[data-theme="dark"] .qr-img { filter:invert(1) hue-rotate(180deg); }

/* Shimmer skeleton */
.qr-shimmer {
  position:absolute; inset:1rem;
  background:linear-gradient(90deg,var(--border-color) 25%,var(--light-color) 50%,var(--border-color) 75%);
  background-size:200% 100%; animation:shimmer 1.4s infinite; border-radius:6px;
}

/* State boxes */
.qr-state-box {
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:.75rem; padding:3rem 2rem; text-align:center; color:var(--gray-color);
  font-size:.9rem;
}
.qr-spin {
  width:36px; height:36px;
  border:4px solid var(--border-color); border-top-color:var(--primary-color);
  border-radius:50%; animation:spin .8s linear infinite;
}

.qr-hint { text-align:center; font-size:.72rem; color:var(--gray-color); opacity:.6; padding:.25rem 0 .5rem; margin:0; flex-shrink:0; }

/* Toast */
.qr-toast {
  position:fixed; bottom:2rem; left:50%; transform:translateX(-50%);
  background:var(--secondary-color); color:#fff;
  padding:.6rem 1.4rem; border-radius:50px;
  font-size:.85rem; font-weight:500;
  box-shadow:0 6px 20px rgba(0,0,0,.25);
  z-index:9999; pointer-events:none; white-space:nowrap;
  animation:toastUp .25s ease, toastOut .25s ease 2s forwards;
}
@keyframes toastUp  { from{opacity:0;transform:translateX(-50%) translateY(10px)} to{opacity:1;transform:translateX(-50%) translateY(0)} }
@keyframes toastOut { to{opacity:0} }


/* =====================================================
   RESPONSIVE
   ===================================================== */
@media (max-width:900px) {
  .qr-cur-surah { display:none; }
}

@media (max-width:768px) {
  .home-tab-btn { padding:.6rem 1rem; font-size:.88rem; }

  .qr-wrap { height:calc(100vh - 140px); border-radius:10px; }

  /* Mobile: sidebar stacks above pane */
  .qr-body { flex-direction:column; }
  .qr-sidebar { width:100%; max-height:220px; border-right:none; border-bottom:1px solid var(--border-color); }
  .qr-surah-list { max-height:160px; }

  .qr-bar      { padding:.5rem .75rem; gap:.4rem; }
  .qr-bar-r    { width:100%; justify-content:space-between; }
  .qr-tools    { gap:.15rem; }
  .qr-tbtn     { width:26px; height:24px; }
  .qr-zlbl     { min-width:30px; font-size:.72rem; }

  .qr-nav-row { padding:.5rem .75rem; gap:.4rem; }
  .qr-nav-btn { padding:.4rem .875rem; font-size:.83rem; }
  .qr-pg-in   { width:52px; }

  .qr-img-box { padding:.5rem; }
}

@media (max-width:480px) {
  .home-tab-btn .tab-icon { display:none; }
  .qr-prog-lbl { display:none; }
  .qr-bm-btn-main { padding:.3rem .6rem; font-size:.78rem; }
}