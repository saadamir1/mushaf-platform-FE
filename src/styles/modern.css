/* ============================================
   MODERN.CSS — Mushaf Platform
   Sections: Layout · Search · Surah Cards ·
   Auth · Navbar · Mobile · Profile · Feedback
   ============================================ */

/* ── CSS CUSTOM PROPS used throughout ──────── */
/* --primary-color, --primary-dark, --accent-color,
   --secondary-color, --text-color, --gray-color,
   --card-bg, --bg-color, --light-color,
   --border-color, --danger-color, --transition   */


/* ============================================
   1. HOME PAGE LAYOUT
   ============================================ */
.home-container { padding: 2rem 0; }

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 2rem;
  gap: 2rem;
}
.page-header h1 { margin: 0; font-size: 2rem; color: var(--secondary-color); }
.subtitle { color: var(--gray-color); margin: 0.5rem 0 0; font-size: 1rem; }

/* Stats badge (top-right of header) */
.stats-badge {
  display: flex;
  flex-direction: column;
  align-items: center;
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
  color: white;
  padding: 1rem 1.5rem;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(13, 115, 119, 0.2);
}
.stat-number { font-size: 2rem; font-weight: 700; line-height: 1; }
.stat-label  { font-size: 0.875rem; opacity: 0.9; margin-top: 0.25rem; }


/* ============================================
   2. SEARCH BAR
   ============================================ */
.search-container { margin-bottom: 2rem; }
.search-wrapper   { position: relative; display: flex; align-items: center; }

.search-icon  { position: absolute; left: 1rem; font-size: 1.25rem; pointer-events: none; }
.search-clear {
  position: absolute; right: 1rem;
  background: none; border: none;
  color: var(--gray-color); cursor: pointer;
  font-size: 1.25rem; padding: 0.25rem;
  transition: var(--transition);
}
.search-clear:hover { color: var(--danger-color); }

.search-input {
  width: 100%;
  padding: 1rem 1rem 1rem 3rem;
  border: 2px solid var(--border-color);
  border-radius: 12px;
  font-size: 1rem;
  background-color: var(--card-bg);
  color: var(--text-color);
  transition: all 0.3s ease;
}
.search-input:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 4px rgba(13, 115, 119, 0.1);
}


/* ============================================
   3. SURAH GRID & CARDS
   ============================================ */
.surah-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 1.5rem;
}

.surah-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1.5rem;
  background-color: var(--card-bg);
  border: 2px solid var(--border-color);
  border-radius: 12px;
  text-decoration: none;
  color: inherit;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}
/* Animated left accent bar */
.surah-card::before {
  content: '';
  position: absolute; top: 0; left: 0;
  width: 4px; height: 100%;
  background: linear-gradient(180deg, var(--primary-color), var(--accent-color));
  transform: scaleY(0);
  transition: transform 0.3s ease;
}
.surah-card:hover {
  border-color: var(--primary-color);
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(13, 115, 119, 0.15);
}
.surah-card:hover::before { transform: scaleY(1); }

/* Numbered badge */
.surah-number {
  flex-shrink: 0;
  width: 48px; height: 48px;
  display: flex; align-items: center; justify-content: center;
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
  color: white;
  border-radius: 10px;
  font-weight: 700; font-size: 1.125rem;
}

.surah-content   { flex: 1; }
.surah-name      { margin: 0 0 0.5rem; font-size: 1.125rem; color: var(--secondary-color); }
.surah-arabic    { margin: 0 0 0.75rem; font-size: 1.25rem; color: var(--text-color); font-weight: 500; }
.surah-arrow     { flex-shrink: 0; font-size: 1.5rem; color: var(--primary-color); transition: transform 0.3s ease; }
.surah-card:hover .surah-arrow { transform: translateX(4px); }

/* Meta badges (verses count, revelation type) */
.surah-meta  { display: flex; gap: 0.5rem; flex-wrap: wrap; }
.meta-badge  {
  display: inline-flex; align-items: center; gap: 0.25rem;
  padding: 0.25rem 0.75rem;
  background-color: var(--light-color); color: var(--gray-color);
  border-radius: 6px; font-size: 0.875rem;
}
.meta-badge.revelation {
  background-color: rgba(13, 115, 119, 0.1);
  color: var(--primary-color); font-weight: 500;
}

/* Skeleton loading state */
.surah-card.skeleton { pointer-events: none; animation: pulse 1.5s ease-in-out infinite; }
.skeleton-line {
  height: 20px;
  background: linear-gradient(90deg, var(--border-color) 25%, var(--light-color) 50%, var(--border-color) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px; margin-bottom: 0.5rem;
}
.skeleton-line.short { width: 60%; }
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

/* Empty / no-results state */
.empty-state { text-align: center; padding: 4rem 2rem; }
.empty-icon  { font-size: 4rem; margin-bottom: 1rem; opacity: 0.5; }
.empty-state h3 { color: var(--secondary-color); margin-bottom: 0.5rem; }
.empty-state p  { color: var(--gray-color); }


/* ============================================
   4. AUTH PAGES (Login / Register)
   ============================================ */
.auth-card.modern { max-width: 420px; padding: 2.5rem; }
.auth-icon        { font-size: 3rem; text-align: center; margin-bottom: 1rem; }
.auth-logo        { display: block; margin: 0 auto 1rem; width: 64px; height: 64px; }
.auth-subtitle    { text-align: center; color: var(--gray-color); margin-bottom: 2rem; font-size: 0.95rem; }
.auth-form        { margin-bottom: 2rem; }
.auth-form .btn   { width: 100%; }

/* Show/hide password toggle */
.password-wrapper { position: relative; display: flex; align-items: center; }
.password-wrapper input { flex: 1; padding-right: 2.75rem; }
.password-toggle {
  position: absolute; right: 0.75rem; top: 50%; transform: translateY(-50%);
  background: none; border: none; cursor: pointer;
  font-size: 1.1rem; color: var(--gray-color);
  padding: 0.25rem; transition: var(--transition);
  display: flex; align-items: center; justify-content: center;
}
.password-toggle:hover { color: var(--primary-color); }

/* Remember me + forgot password row */
.form-options {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  flex-wrap: wrap; gap: 0.5rem;
}
.form-options a { color: var(--primary-color); text-decoration: none; font-size: 0.9rem; }
.form-options a:hover { text-decoration: underline; }
.checkbox-label { display: flex; align-items: center; gap: 0.5rem; cursor: pointer; user-select: none; }
.checkbox-label input[type="checkbox"] { width: auto; cursor: pointer; }
@media (max-width: 400px) {
  .form-options { flex-direction: column; align-items: flex-start; }
}

/* Button loading spinner */
.btn-loader {
  display: inline-block;
  width: 16px; height: 16px;
  border: 2px solid rgba(255,255,255,0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
  margin-right: 0.5rem;
}

/* Demo credentials display */
.demo-label { text-align: center; color: var(--gray-color); font-size: 0.875rem; margin-bottom: 1rem; font-weight: 600; }
.demo-credentials { background-color: var(--light-color); border-radius: 8px; padding: 1rem; }
.credential-item { display: flex; justify-content: space-between; padding: 0.5rem 0; }
.credential-item:not(:last-child) { border-bottom: 1px solid var(--border-color); }
.credential-label { color: var(--gray-color); font-size: 0.875rem; }
.credential-value { color: var(--secondary-color); font-weight: 600; font-size: 0.875rem; font-family: 'Courier New', monospace; }


/* ============================================
   5. NAVBAR (Desktop)
   ============================================ */
.navbar {
  background-color: var(--card-bg);
  border-bottom: 1px solid var(--border-color);
  position: sticky; top: 0; z-index: 1000; width: 100%;
}
.navbar-container {
  max-width: 1200px; margin: 0 auto; padding: 0 1.5rem;
  display: flex; align-items: center; justify-content: space-between;
  height: 64px; gap: 1rem;
}

/* Brand / logo */
.navbar-brand { display: flex; align-items: center; flex-shrink: 0; }
.brand-link   { display: flex; align-items: center; gap: 0.5rem; text-decoration: none; color: inherit; }
.brand-link:hover { opacity: 0.8; }
.nav-logo     { height: 36px; width: auto; }
.brand-text   { font-weight: 700; font-size: 1.25rem; color: var(--secondary-color); }

/* Hamburger (hidden on desktop, shown on mobile) */
.hamburger {
  display: none;
  flex-direction: column; justify-content: center; align-items: center;
  gap: 5px; width: 40px; height: 40px; padding: 0;
  background: transparent; border: none; cursor: pointer;
  border-radius: 8px; transition: background-color 0.2s ease; flex-shrink: 0;
}
.hamburger:hover { background-color: var(--light-color); }
.hamburger span { display: block; width: 22px; height: 2px; background-color: var(--text-color); border-radius: 2px; transition: all 0.3s ease; transform-origin: center; }
.hamburger.active span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
.hamburger.active span:nth-child(2) { opacity: 0; transform: scaleX(0); }
.hamburger.active span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

/* Nav links */
.navbar-menu { display: flex; align-items: center; justify-content: space-between; flex: 1; gap: 1rem; }
.nav-links   { display: flex; align-items: center; gap: 0.25rem; list-style: none; margin: 0; padding: 0; }

.nav-link {
  display: flex; align-items: center; gap: 0.4rem;
  padding: 0.5rem 0.875rem; border-radius: 8px;
  text-decoration: none; color: var(--text-color);
  font-weight: 500; font-size: 0.95rem;
  transition: background-color 0.2s ease, color 0.2s ease;
  white-space: nowrap; position: relative;
}
.nav-link:hover  { background-color: var(--light-color); color: var(--primary-color); }
.nav-link.active { color: var(--primary-color); background-color: transparent; }
/* Active underline indicator */
.nav-link.active::after {
  content: ''; position: absolute; bottom: -2px; left: 50%;
  transform: translateX(-50%); width: 50%; height: 2px;
  background-color: var(--primary-color); border-radius: 2px;
}
.nav-icon { font-size: 1rem; line-height: 1; }

/* Right-side actions area */
.navbar-actions { display: flex; align-items: center; gap: 0.5rem; flex-shrink: 0; }

/* Theme toggle button */
.theme-toggle {
  display: flex; align-items: center; justify-content: center;
  width: 38px; height: 38px;
  border-radius: 50%; border: none; background: transparent;
  cursor: pointer; font-size: 1.2rem; color: var(--text-color);
  transition: background-color 0.2s ease; flex-shrink: 0;
}
.theme-toggle:hover { background-color: var(--light-color); }

/* User dropdown trigger */
.user-dropdown { position: relative; flex-shrink: 0; }
.user-toggle {
  display: flex; align-items: center; gap: 0.5rem;
  padding: 0.375rem 0.75rem 0.375rem 0.375rem;
  border-radius: 50px; border: 2px solid var(--border-color);
  background-color: var(--card-bg); cursor: pointer;
  transition: border-color 0.2s ease; white-space: nowrap;
}
.user-toggle:hover { border-color: var(--primary-color); }
.user-avatar {
  width: 30px; height: 30px; border-radius: 50%;
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
  color: white; display: flex; align-items: center; justify-content: center;
  font-size: 0.7rem; font-weight: 700; flex-shrink: 0; letter-spacing: 0.5px;
}
.user-name-nav  { font-weight: 500; font-size: 0.9rem; color: var(--text-color); }
.dropdown-arrow { font-size: 0.55rem; color: var(--gray-color); transition: transform 0.2s ease; margin-left: 0.125rem; }
.dropdown-arrow.open { transform: rotate(180deg); }

/* Dropdown panel */
.dropdown-menu {
  position: absolute; top: calc(100% + 0.625rem); right: 0;
  min-width: 230px;
  background-color: var(--card-bg);
  border: 1px solid var(--border-color); border-radius: 12px;
  box-shadow: 0 12px 40px rgba(0,0,0,0.18);
  overflow: hidden; z-index: 1100;
  animation: dropdownFade 0.18s ease;
}
@keyframes dropdownFade { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } }

.dropdown-header {
  padding: 1rem 1rem 0.875rem;
  background-color: var(--light-color);
  border-bottom: 1px solid var(--border-color);
}
.dropdown-name  { font-weight: 600; font-size: 0.95rem; color: var(--secondary-color); margin-bottom: 0.2rem; }
.dropdown-email { font-size: 0.8rem; color: var(--gray-color); margin-bottom: 0.5rem; word-break: break-all; }
.dropdown-role  {
  display: inline-block; padding: 0.2rem 0.5rem;
  background-color: rgba(13,115,119,0.12); color: var(--primary-color);
  border-radius: 4px; font-size: 0.72rem; font-weight: 600;
  text-transform: capitalize; letter-spacing: 0.3px;
}
.dropdown-divider { height: 1px; background-color: var(--border-color); }

.dropdown-item {
  display: flex; align-items: center; gap: 0.75rem;
  width: 100%; padding: 0.75rem 1rem;
  border: none; background: none; text-align: left; text-decoration: none;
  color: var(--text-color); font-size: 0.9rem; cursor: pointer;
  transition: background-color 0.15s ease; font-family: inherit;
}
.dropdown-item:hover        { background-color: var(--light-color); }
.dropdown-item.logout       { color: var(--danger-color); }
.dropdown-item.logout:hover { background-color: rgba(214,40,40,0.08); }

/* Guest (logged-out) nav links */
.guest-links { display: flex; align-items: center; gap: 0.5rem; }


/* ============================================
   6. MOBILE NAVBAR  (≤768px)
   ============================================ */
@media (max-width: 768px) {

  .hamburger { display: flex; }
  .navbar-container { padding: 0 1rem; height: 60px; }

  .navbar-menu { display: none; position: absolute; top: 60px; left: 0; right: 0; flex-direction: column; align-items: stretch; background-color: var(--card-bg); border-bottom: 2px solid var(--border-color); padding: .75rem 1rem 1rem; gap: 0; box-shadow: 0 8px 24px rgba(0,0,0,.15); z-index: 999; }
  .navbar-menu.active { display: flex; }
  .nav-links { flex-direction: column; width: 100%; gap: 0; padding-bottom: .5rem; margin-bottom: .5rem; border-bottom: 1px solid var(--border-color); }
  .nav-link { width: 100%; padding: .75rem .875rem; font-size: .975rem; border-radius: 8px; justify-content: flex-start; }
  .nav-link.active::after { display: none; }
  .nav-link.active { background-color: rgba(13,115,119,.1); color: var(--primary-color); }

  /* Logged-in: moon on left, Saad button compact on right */

  .navbar-actions { display: flex; align-items: center; justify-content: space-between; gap: .5rem; padding-top: .5rem; width: 100%; }
  .navbar-actions .theme-toggle { flex-shrink: 0; }
  .navbar-actions .user-dropdown { flex-shrink: 0; }   /* ← do NOT stretch */
  .navbar-actions .user-toggle { width: auto; }         /* ← stays compact */

  /* Guest: moon on left, buttons split remaining space */
  .guest-actions { display: flex; align-items: center; gap: .5rem; width: 100%; padding-top: .5rem; }
  .guest-actions .theme-toggle { flex-shrink: 0; }
  .guest-actions .btn { flex: 1; text-align: center; justify-content: center; }
  .dropdown-menu { position: absolute; top: calc(100% + .5rem); right: 0; min-width: 240px; max-width: calc(100vw - 2rem); }


  /* Home page mobile tweaks */
  .home-container { padding: 1rem 0; }
  .page-header    { flex-direction: column; gap: 1rem; }
  .page-header h1 { font-size: 1.5rem; }
  .stats-badge    { align-self: flex-start; padding: 0.75rem 1.25rem; }
  .stat-number    { font-size: 1.5rem; }
  .surah-grid     { grid-template-columns: 1fr; gap: 1rem; }
  .surah-card     { padding: 1rem; }
  .surah-number   { width: 40px; height: 40px; font-size: 1rem; }
  .surah-name     { font-size: 1rem; }
  .surah-arabic   { font-size: 1.125rem; }
  .search-input   { padding: 0.875rem 0.875rem 0.875rem 2.75rem; font-size: 0.95rem; }
  .search-icon    { left: 0.875rem; font-size: 1.125rem; }
  .auth-card.modern { padding: 2rem 1.5rem; }
  .auth-icon      { font-size: 2.5rem; }
}


/* ============================================
   7. PROFILE PAGE
   ============================================ */
.profile-page { max-width: 700px; margin: 0 auto; padding: 2rem 1rem; }
.profile-card { background-color: var(--card-bg); border: 2px solid var(--border-color); border-radius: 12px; padding: 2rem; }

.profile-header {
  display: flex; align-items: center; gap: 1.5rem;
  margin-bottom: 2rem; padding-bottom: 2rem;
  border-bottom: 1px solid var(--border-color);
}
.profile-avatar-large {
  width: 80px; height: 80px; border-radius: 50%;
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
  color: white; display: flex; align-items: center; justify-content: center;
  font-size: 1.75rem; font-weight: 700; flex-shrink: 0;
}
.profile-details h2  { margin: 0 0 0.25rem; font-size: 1.5rem; color: var(--secondary-color); }
.profile-details p   { margin: 0 0 0.5rem; color: var(--gray-color); }
.profile-details .badge {
  display: inline-block; padding: 0.25rem 0.75rem;
  background-color: rgba(13,115,119,0.1); color: var(--primary-color);
  border-radius: 6px; font-size: 0.875rem; font-weight: 500;
}

/* Form sections */
.profile-form-section { margin-bottom: 2rem; }
.profile-form-section:last-child { margin-bottom: 0; }
.profile-form-section h3 { font-size: 1.125rem; color: var(--secondary-color); margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--border-color); }

.profile-form .form-row    { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
.profile-form .form-group  { margin-bottom: 1rem; }
.profile-form label        { display: block; margin-bottom: 0.5rem; font-weight: 500; color: var(--secondary-color); }
.profile-form input[type="text"],
.profile-form input[type="email"],
.profile-form input[type="password"] {
  width: 100%; padding: 0.75rem 1rem;
  border: 2px solid var(--border-color); border-radius: 8px;
  font-size: 1rem; background-color: var(--bg-color); color: var(--text-color);
  transition: all 0.3s ease;
}
.profile-form input:focus          { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(13,115,119,0.1); }
.profile-form input:disabled,
.profile-form input.disabled       { background-color: var(--light-color); cursor: not-allowed; }
.profile-form small                { display: block; margin-top: 0.25rem; color: var(--gray-color); font-size: 0.875rem; }
.profile-form .btn                 { margin-top: 0.5rem; }

/* Button variants */
.btn-secondary { background-color: var(--light-color); color: var(--secondary-color); border: 2px solid var(--border-color); }
.btn-secondary:hover { background-color: var(--border-color); }
.btn-danger    { background-color: var(--danger-color); color: white; border: none; }
.btn-danger:hover    { background-color: #c82333; }
.btn-danger:disabled, .btn-outline:disabled { opacity: 0.6; cursor: not-allowed; }
.btn-outline   { background-color: transparent; color: var(--primary-color); border: 2px solid var(--primary-color); }
.btn-outline:hover   { background-color: var(--primary-color); color: white; }
.btn-sm        { padding: 0.5rem 1rem; font-size: 0.875rem; }

/* Resend verification section */
.resend-section { text-align: center; margin: 1.5rem 0; padding: 1rem; background-color: var(--light-color); border-radius: 8px; }
.resend-text    { margin: 0 0 0.75rem; font-size: 0.9rem; color: var(--gray-color); }
.resend-link    { background: none; border: none; color: var(--primary-color); cursor: pointer; font-size: 0.9rem; text-decoration: underline; margin-left: 0.5rem; }
.resend-link:hover    { color: var(--primary-dark); }
.resend-link:disabled { opacity: 0.6; cursor: not-allowed; }

@media (max-width: 768px) {
  .profile-page { padding: 1rem; }
  .profile-card { padding: 1.5rem; }
  .profile-header { flex-direction: column; text-align: center; }
  .profile-form .form-row { grid-template-columns: 1fr; }
}


/* ============================================
   8. FEEDBACK: Alerts, Success, Error Boundary
   ============================================ */

/* Inline alert banners */
.error-message   { background-color: rgba(220,53,69,0.1); border: 1px solid var(--danger-color); color: var(--danger-color); padding: 0.75rem 1rem; border-radius: 8px; margin-bottom: 1rem; font-size: 0.9rem; }
.success-message { background-color: rgba(40,167,69,0.1); border: 1px solid #28a745; color: #28a745; padding: 0.75rem 1rem; border-radius: 8px; margin-bottom: 1rem; font-size: 0.9rem; }

/* Full-screen error boundary overlay */
.robust-error-boundary {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  min-height: 100vh; padding: 2rem; text-align: center;
  background-color: var(--bg-color);
  position: fixed; inset: 0; z-index: 9999; overflow: auto;
}
.error-card {
  background-color: var(--card-bg); padding: 2rem; border-radius: 12px;
  max-width: 600px; width: 100%;
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
  border: 1px solid var(--border-color);
}
.error-icon        { font-size: 3rem; line-height: 1; display: block; margin-bottom: 1rem; }
.error-title       { margin: 0 0 0.5rem; font-size: 1.5rem; color: var(--secondary-color); font-weight: 700; }
.error-description { margin: 0 0 1.5rem; color: var(--gray-color); line-height: 1.5; }

/* Collapsible technical details */
.error-details { margin-bottom: 1.5rem; padding: 1rem; background-color: var(--bg-color); border-radius: 6px; border: 1px solid var(--border-color); text-align: left; }
.error-details summary { cursor: pointer; font-weight: bold; color: var(--text-color); margin-bottom: 0.5rem; display: block; }
.error-details pre { font-size: 0.75rem; color: var(--text-secondary); white-space: pre-wrap; margin: 0; }
.error-details p   { margin: 0 0 0.5rem; font-size: 0.875rem; }
.error-details strong { color: var(--secondary-color); }

/* Error action buttons */
.error-actions { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-bottom: 1.5rem; }
.error-btn {
  padding: 0.75rem 1.5rem; border: none; border-radius: 6px;
  cursor: pointer; font-weight: 600; font-size: 0.875rem;
  transition: all 0.2s ease; text-decoration: none;
  display: inline-block; text-align: center; min-width: 120px;
}
.error-btn.primary   { background-color: var(--primary-color); color: white; box-shadow: 0 2px 4px rgba(13,115,119,0.3); }
.error-btn.primary:hover { background-color: var(--primary-dark); transform: translateY(-1px); box-shadow: 0 4px 8px rgba(13,115,119,0.4); }
.error-btn.secondary { background-color: transparent; color: var(--text-color); border: 1px solid var(--border-color); }
.error-btn.secondary:hover { background-color: var(--light-color); border-color: var(--primary-color); color: var(--primary-color); }
.error-btn.success   { background-color: var(--success-color); color: white; }
.error-btn.success:hover { background-color: #1e7e34; transform: translateY(-1px); }
.error-btn:disabled  { opacity: 0.6; cursor: not-allowed; transform: none; }
.error-support { font-size: 0.875rem; color: var(--gray-color); opacity: 0.8; margin: 0; }

@media (max-width: 768px) {
  .robust-error-boundary { padding: 1rem; }
  .error-card  { padding: 1.5rem; }
  .error-title { font-size: 1.25rem; }
  .error-icon  { font-size: 2.5rem; }
  .error-actions { flex-direction: column; align-items: center; gap: 0.75rem; }
  .error-btn   { width: 100%; max-width: 280px; }
}

/* =====================================================
   HOME TABS  — append to modern.css
   ===================================================== */
.home-tabs { display:flex; border-bottom:2px solid var(--border-color); margin-bottom:2rem; }
.home-tab-btn {
  display:inline-flex; align-items:center; gap:.45rem;
  padding:.7rem 1.5rem; border:none; border-bottom:3px solid transparent;
  background:transparent; color:var(--gray-color);
  font:600 .95rem/1 inherit; cursor:pointer;
  margin-bottom:-2px; transition:color .2s,border-color .2s;
}
.home-tab-btn:hover  { color:var(--primary-color); }
.home-tab-btn.active { color:var(--primary-color); border-bottom-color:var(--primary-color); }
.tab-content { animation:tabIn .2s ease; }
@keyframes tabIn { from{opacity:0;transform:translateY(4px)} to{opacity:1;transform:none} }

/* Page badge on surah cards */
.meta-badge--page { background:rgba(13,115,119,.12)!important; color:var(--primary-color)!important; font-weight:600; }


/* ================================================================
   QURAN READER v2 — "Sacred Minimal"
   Replace ALL existing .qr- and .qr2- rules in modern.css with this.
   ================================================================ */


.qr2-shell{display:flex;flex-direction:column;background:var(--card-bg);border:1px solid var(--border-color);border-radius:16px;overflow:hidden;box-shadow:0 8px 32px rgba(0,0,0,.08);height:calc(100vh - 100px);min-height:600px;position:relative;user-select:none}

/* ── Top Bar ── */
.qr2-topbar{display:flex;align-items:center;justify-content:space-between;padding:.625rem 1rem;background:var(--card-bg);border-bottom:1px solid var(--border-color);gap:.75rem;flex-shrink:0;min-height:52px;z-index:5}
.qr2-topbar-nav{display:flex;align-items:center;gap:.5rem;flex-shrink:0}
.qr2-nav-btn{width:34px;height:34px;display:flex;align-items:center;justify-content:center;border:1.5px solid var(--border-color);border-radius:8px;background:var(--bg-color);color:var(--text-color);cursor:pointer;transition:all .18s ease;flex-shrink:0}
.qr2-nav-btn:hover:not(:disabled){background:var(--primary-color);border-color:var(--primary-color);color:#fff;transform:scale(1.05)}
.qr2-nav-btn:disabled{opacity:.3;cursor:not-allowed}
.qr2-page-jump{display:flex;align-items:center;gap:.3rem;background:var(--bg-color);border:1.5px solid var(--border-color);border-radius:8px;padding:.25rem .5rem}
.qr2-jump-input{width:48px;border:none;background:transparent;color:var(--text-color);font:600 .9rem/1 inherit;text-align:center;padding:0;outline:none;-moz-appearance:textfield}
.qr2-jump-input::-webkit-outer-spin-button,.qr2-jump-input::-webkit-inner-spin-button{-webkit-appearance:none}
.qr2-jump-sep{color:var(--border-color);font-size:.85rem}
.qr2-jump-total{color:var(--gray-color);font-size:.78rem;font-weight:500}
.qr2-jump-go{padding:.22rem .55rem;border:none;border-radius:5px;background:var(--primary-color);color:#fff;font:600 .75rem/1 inherit;cursor:pointer;transition:background .18s}
.qr2-jump-go:hover{background:var(--primary-dark)}
.qr2-surah-badge{display:flex;align-items:center;gap:.4rem;background:rgba(13,115,119,.08);border:1px solid rgba(13,115,119,.15);border-radius:20px;padding:.3rem .75rem;min-width:0;flex:1;justify-content:center;max-width:260px;margin:0 auto}
.qr2-sb-num{width:20px;height:20px;background:var(--primary-color);color:#fff;border-radius:50%;font:700 .65rem/1 inherit;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.qr2-sb-en{font-size:.8rem;font-weight:600;color:var(--primary-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.qr2-sb-ar{font-size:.92rem;color:var(--primary-dark);flex-shrink:0}
.qr2-topbar-actions{display:flex;align-items:center;gap:.35rem;flex-shrink:0}
.qr2-action-btn{display:flex;align-items:center;gap:.3rem;padding:.3rem .65rem;border:1.5px solid var(--border-color);border-radius:8px;background:transparent;color:var(--gray-color);font:500 .78rem/1 inherit;cursor:pointer;transition:all .18s ease;position:relative;white-space:nowrap}
.qr2-action-btn:hover{border-color:var(--primary-color);color:var(--primary-color);background:rgba(13,115,119,.06)}
.qr2-action-btn.bookmarked{border-color:var(--accent-color);color:var(--accent-color);background:rgba(252,163,17,.08)}
.qr2-action-label{font-size:.75rem}
.qr2-bm-count{position:absolute;top:-5px;right:-5px;min-width:16px;height:16px;background:var(--accent-color);color:#111;border-radius:8px;font:700 .6rem/16px inherit;text-align:center;padding:0 3px}

/* ── Progress ── */
.qr2-progress{height:3px;background:var(--border-color);flex-shrink:0}
.qr2-progress-fill{height:100%;background:linear-gradient(90deg,var(--primary-color),var(--accent-color));transition:width .4s ease;border-radius:0 2px 2px 0}
.qr2-progress-label{font-size:.68rem;color:var(--gray-color);text-align:right;padding:.18rem 1rem;background:var(--bg-color);border-bottom:1px solid var(--border-color);flex-shrink:0;letter-spacing:.02em}

/* ── Stage wrapper ── */
.qr2-stage-wrap{flex:1;min-height:0;position:relative;isolation:isolate}

/* ── Scrollable stage ── */
.qr2-stage{position:absolute;inset:0;overflow:auto;display:block;will-change:scroll-position;
padding:1.5rem;background:var(--bg-color);scrollbar-width:thin;scrollbar-color:var(--border-color) transparent;background-image:radial-gradient(circle at 1px 1px,var(--border-color) 1px,transparent 0);background-size:24px 24px}

.qr2-img{display:block;max-width:100%;height:auto;width:auto;border-radius:4px;box-shadow:0 8px 32px rgba(0,0,0,.18);opacity:0;transform-origin:top center;transition:opacity .3s ease,transform .25s ease;margin:0 auto}
.qr2-img.loaded{opacity:1}
[data-theme="dark"] .qr2-img{filter:invert(1) hue-rotate(180deg);box-shadow:0 8px 32px rgba(0,0,0,.5)}
.qr2-shimmer{position:absolute;inset:1.5rem;background:linear-gradient(90deg,var(--border-color) 25%,var(--light-color) 50%,var(--border-color) 75%);background-size:200% 100%;animation:qr2-shimmer 1.4s infinite;border-radius:8px}
@keyframes qr2-shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
.qr2-state{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.75rem;padding:3rem 2rem;color:var(--gray-color);font-size:.9rem;text-align:center;width:100%}
.qr2-state-icon{font-size:2.5rem}
.qr2-spinner{width:38px;height:38px;border:3px solid var(--border-color);border-top-color:var(--primary-color);border-radius:50%;animation:qr2-spin .8s linear infinite}
@keyframes qr2-spin{to{transform:rotate(360deg)}}
.qr2-retry-btn{padding:.5rem 1.25rem;border:1.5px solid var(--primary-color);border-radius:8px;background:transparent;color:var(--primary-color);font:600 .875rem/1 inherit;cursor:pointer;transition:all .18s}
.qr2-retry-btn:hover{background:var(--primary-color);color:#fff}

/* ── Zoom FAB ──
   position:FIXED = anchored to viewport, immune to all scroll,
   overflow, stacking context and parent transform issues.
   bottom:5rem sits above the bottom-nav bar on desktop.           */
.qr2-zoom-fab{
  position:absolute;
  bottom:1rem;
  right:1rem;
  z-index:9990;
  display:flex;
  align-items:center;
  gap:.2rem;
  background:var(--card-bg);
  border:1px solid var(--border-color);
  border-radius:50px;
  padding:.3rem .6rem;
  box-shadow:0 4px 20px rgba(0,0,0,.25);
  opacity:0;
  transition:opacity .2s ease;
  pointer-events:none;
}
.qr2-zoom-fab.visible{opacity:1;pointer-events:auto}

.qr2-zoom-btn{width:28px;height:28px;border:none;border-radius:50%;background:transparent;color:var(--text-color);font-size:1rem;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .15s;line-height:1}
.qr2-zoom-btn:hover:not(:disabled){background:var(--primary-color);color:#fff}
.qr2-zoom-btn:disabled{opacity:.3;cursor:not-allowed}
.qr2-zoom-val{font-size:.72rem;color:var(--gray-color);min-width:34px;text-align:center;font-weight:600}
.qr2-zoom-divider{width:1px;height:16px;background:var(--border-color);margin:0 .1rem}

/* ── Bottom Navigation ── */
.qr2-bottom-nav{display:flex;align-items:center;justify-content:space-between;padding:.625rem 1rem;border-top:1px solid var(--border-color);background:var(--card-bg);flex-shrink:0;z-index:5}
.qr2-bottom-btn{display:flex;align-items:center;gap:.4rem;padding:.5rem 1.25rem;border:1.5px solid var(--border-color);border-radius:8px;background:var(--bg-color);color:var(--text-color);font:600 .875rem/1 inherit;cursor:pointer;transition:all .18s ease}
.qr2-bottom-btn:hover:not(:disabled){background:var(--primary-color);border-color:var(--primary-color);color:#fff}
.qr2-bottom-btn:disabled{opacity:.3;cursor:not-allowed}
.qr2-bottom-info{font:600 .85rem/1 inherit;color:var(--gray-color)}

/* ── Drawers ── */
.qr2-drawer-overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:1000;display:flex;align-items:flex-end;justify-content:center;animation:qr2-overlay-in .2s ease;backdrop-filter:blur(2px)}
@keyframes qr2-overlay-in{from{opacity:0}to{opacity:1}}
.qr2-drawer{width:100%;max-width:480px;max-height:75vh;background:var(--card-bg);border-radius:20px 20px 0 0;display:flex;flex-direction:column;overflow:hidden;animation:qr2-drawer-up .28s cubic-bezier(.34,1.56,.64,1);box-shadow:0 -8px 40px rgba(0,0,0,.2)}
@keyframes qr2-drawer-up{from{transform:translateY(100%)}to{transform:translateY(0)}}
.qr2-drawer-header{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-bottom:1px solid var(--border-color);flex-shrink:0;background:var(--card-bg);position:relative}
.qr2-drawer-header::before{content:'';position:absolute;top:8px;left:50%;transform:translateX(-50%);width:36px;height:4px;background:var(--border-color);border-radius:2px}
.qr2-drawer-title{font:700 1rem/1 inherit;color:var(--secondary-color)}
.qr2-drawer-close{width:28px;height:28px;border:none;border-radius:50%;background:var(--light-color);color:var(--gray-color);font-size:.8rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .15s}
.qr2-drawer-close:hover{background:var(--danger-color);color:#fff}
.qr2-drawer-list{overflow-y:auto;flex:1;padding:.5rem 0;scrollbar-width:thin}
.qr2-surah-item{display:flex;align-items:center;gap:.75rem;width:100%;padding:.75rem 1.25rem;border:none;border-left:3px solid transparent;background:transparent;text-align:left;cursor:pointer;font-family:inherit;transition:all .15s}
.qr2-surah-item:hover{background:var(--light-color)}
.qr2-surah-item.active{background:rgba(13,115,119,.08);border-left-color:var(--primary-color)}
.qr2-si-num{width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));color:#fff;font:700 .72rem/28px inherit;text-align:center;flex-shrink:0}
.qr2-si-body{flex:1;display:flex;flex-direction:column;gap:.15rem;min-width:0}
.qr2-si-en{font:500 .875rem/1 inherit;color:var(--text-color)}
.qr2-si-ar{font-size:1rem;color:var(--secondary-color)}
.qr2-si-pg{font-size:.72rem;color:var(--gray-color);flex-shrink:0}
.qr2-drawer-empty{display:flex;flex-direction:column;align-items:center;gap:.5rem;padding:3rem 1.5rem;color:var(--gray-color);text-align:center}
.qr2-empty-icon{font-size:2.5rem}
.qr2-drawer-empty p{font-size:.9rem;margin:0}
.qr2-drawer-empty small{font-size:.78rem;opacity:.7}
.qr2-bm-item{display:flex;align-items:center;justify-content:space-between;padding:.875rem 1.25rem;border-bottom:1px solid var(--border-color);gap:.75rem}
.qr2-bm-info{flex:1}
.qr2-bm-page{font:600 .9rem/1 inherit;color:var(--secondary-color);display:block;margin-bottom:.2rem}
.qr2-bm-note{font-size:.75rem;color:var(--gray-color)}
.qr2-bm-actions{display:flex;gap:.4rem}
.qr2-bm-go,.qr2-bm-del{padding:.3rem .7rem;border-radius:6px;border:1.5px solid var(--border-color);background:transparent;font:600 .78rem/1 inherit;cursor:pointer;transition:all .15s}
.qr2-bm-go{color:var(--primary-color);border-color:var(--primary-color)}
.qr2-bm-go:hover{background:var(--primary-color);color:#fff}
.qr2-bm-del{color:var(--danger-color);border-color:var(--danger-color)}
.qr2-bm-del:hover{background:var(--danger-color);color:#fff}

/* ── Toast ── */
.qr2-toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%);background:var(--secondary-color);color:#fff;padding:.6rem 1.5rem;border-radius:50px;font:500 .85rem/1 inherit;box-shadow:0 6px 24px rgba(0,0,0,.25);z-index:9999;pointer-events:none;white-space:nowrap;animation:qr2-toast-in .25s ease,qr2-toast-out .25s ease 2.2s forwards}
@keyframes qr2-toast-in{from{opacity:0;transform:translateX(-50%) translateY(10px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}
@keyframes qr2-toast-out{to{opacity:0}}

/* ── Desktop drawer ── */
@media(min-width:769px){
  .qr2-drawer-overlay{align-items:stretch;justify-content:flex-end}
  .qr2-drawer{max-width:300px;max-height:100%;border-radius:0;border-left:1px solid var(--border-color);animation:qr2-drawer-right .25s cubic-bezier(.34,1.2,.64,1)}
  @keyframes qr2-drawer-right{from{transform:translateX(100%)}to{transform:translateX(0)}}
  .qr2-drawer-header::before{display:none}
}

/* ── Mobile (≤768px) ── */
@media(max-width:768px){
  .qr2-shell{height:calc(100vh - 130px);min-height:500px;border-radius:12px}
  .qr2-topbar{flex-wrap:wrap;padding:.5rem .75rem;gap:.4rem;min-height:auto}
  .qr2-topbar-nav{order:1;flex:1}
  .qr2-surah-badge{display:none}
  .qr2-topbar-actions{order:2;flex-shrink:0}
  .qr2-action-label{display:none}
  .qr2-action-btn{padding:.3rem .5rem;font-size:1rem}
  .qr2-page-jump{padding:.2rem .4rem;gap:.25rem}
  .qr2-jump-input{width:40px;font-size:.85rem}
  .qr2-jump-total,.qr2-jump-sep{display:none}
  .qr2-nav-btn{width:30px;height:30px}
  .qr2-progress-label{text-align:center;font-size:.7rem}
  .qr2-stage{padding:.75rem;background-image:none}
  .qr2-zoom-fab{bottom:.75rem;right:.75rem;padding:.2rem .45rem;gap:.1rem}
  .qr2-zoom-btn{width:26px;height:26px;font-size:.9rem}
  .qr2-zoom-val{min-width:28px;font-size:.68rem}
  .qr2-zoom-divider{height:12px}
  .qr2-bottom-nav{padding:.5rem .75rem}
  .qr2-bottom-btn{padding:.45rem 1rem;font-size:.82rem}
  .qr2-bottom-info{font-size:.8rem}
}

/* ── Very small phones (≤400px) ── */
@media(max-width:400px){
  .qr2-shell{height:calc(100vh - 110px);min-height:440px;border-radius:10px}
  .qr2-stage{padding:.5rem}
  .qr2-zoom-fab{bottom:.5rem;right:.5rem}
  .qr2-bottom-btn{padding:.4rem .75rem;font-size:.78rem}
  .qr2-jump-input{width:36px}
  .qr2-jump-go{padding:.18rem .4rem;font-size:.7rem}
}
/* =====================================================
   PAGE VIEWER  — append to modern.css (after qr- rules)
   Reuses all qr-* classes from quran-reader.css.
      Only defines layout unique to the standalone route.
   ===================================================== */

/* ── Shell: full viewport below navbar ── */
.pv-shell {
  display: flex;
  flex-direction: column;
  /* viewport minus navbar (64px desktop / 60px mobile) + own padding */
  height: calc(100vh - 64px);
  padding: .875rem 0 .5rem;
  gap: .5rem;
  box-sizing: border-box;
  overflow: hidden;           /* nothing spills out */
}

/* ── Top bar ── */
.pv-bar {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: .75rem;
  padding: .6rem 1.25rem;
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  flex-shrink: 0;
}

.pv-bar-left  { display: flex; align-items: center; gap: .625rem; }
.pv-bar-right { display: flex; align-items: center; gap: .5rem; justify-content: flex-end; }

/* Back button */
.pv-back {
  display: inline-flex;
  align-items: center;
  padding: .38rem .875rem;
  border: 1.5px solid var(--border-color);
  border-radius: 8px;
  color: var(--text-color);
  font: 500 .875rem/1 inherit;
  text-decoration: none;
  white-space: nowrap;
  transition: .2s;
  flex-shrink: 0;
}
.pv-back:hover { border-color: var(--primary-color); color: var(--primary-color); background: rgba(13,115,119,.06); }

/* Page info chips */
.pv-page-info { display: flex; align-items: center; gap: .4rem; flex-wrap: wrap; }
.pv-page-num  { font: 700 .95rem/1 inherit; color: var(--secondary-color); }
.pv-chip {
  padding: .2rem .6rem;
  background: var(--light-color);
  color: var(--gray-color);
  border-radius: 6px;
  font: 500 .75rem/1 inherit;
}
.pv-chip.accent { background: rgba(13,115,119,.1); color: var(--primary-color); }

/* Center navigation */
.pv-bar-nav { display: flex; align-items: center; gap: .4rem; justify-content: center; }
.pv-nav-btn {
  display: inline-flex; align-items: center; justify-content: center;
  min-width: 36px; height: 36px; padding: 0 .75rem;
  border: 1.5px solid var(--border-color);
  border-radius: 8px;
  background: var(--card-bg); color: var(--text-color);
  font: 600 1rem/1 inherit; cursor: pointer; transition: .2s;
  white-space: nowrap;
}
.pv-nav-btn:hover:not(:disabled) { background: var(--primary-color); color: #fff; border-color: var(--primary-color); }
.pv-nav-btn:disabled { opacity: .38; cursor: not-allowed; }
.pv-nav-btn.wide { padding: 0 1.1rem; font-size: .88rem; }

.pv-jump    { display: flex; align-items: center; gap: .35rem; }
.pv-jump-in {
  width: 62px; height: 34px;
  padding: 0 .5rem; text-align: center;
  border: 1.5px solid var(--border-color); border-radius: 7px;
  background: var(--bg-color); color: var(--text-color);
  font: .9rem/1 inherit;
  transition: border-color .2s;
}
.pv-jump-in:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(13,115,119,.1); }
.pv-jump-of { font-size: .8rem; color: var(--gray-color); }
.pv-go {
  height: 34px; padding: 0 .875rem;
  border: none; border-radius: 7px;
  background: var(--primary-color); color: #fff;
  font: 600 .85rem/1 inherit; cursor: pointer; transition: .2s;
}
.pv-go:hover { background: var(--primary-dark); }

/* Right tools */
.pv-zoom-row {
  display: flex; align-items: center; gap: .2rem;
  background: var(--bg-color);
  border: 1.5px solid var(--border-color);
  border-radius: 8px; padding: .18rem .35rem;
}
.pv-tool {
  width: 28px; height: 26px;
  display: flex; align-items: center; justify-content: center;
  border: none; border-radius: 5px;
  background: transparent; color: var(--text-color);
  font: 700 .78rem/1 monospace; cursor: pointer; transition: .15s;
}
.pv-tool:hover:not(:disabled) { background: var(--primary-color); color: #fff; }
.pv-tool:disabled { opacity: .35; cursor: not-allowed; }
/* Reset & rotate use normal font */
.pv-tool:nth-last-child(-n+2) { font-family: inherit; font-size: .95rem; }
.pv-zoom-val { font-size: .78rem; color: var(--gray-color); min-width: 36px; text-align: center; }

.pv-bookmark-btn {
  display: inline-flex; align-items: center; gap: .3rem;
  padding: .38rem .875rem; height: 36px;
  border: 1.5px solid var(--border-color); border-radius: 8px;
  background: transparent; color: var(--gray-color);
  font: 500 .83rem/1 inherit; cursor: pointer; white-space: nowrap; transition: .2s;
}
.pv-bookmark-btn:hover { border-color: var(--primary-color); color: var(--primary-color); }
.pv-bookmark-btn.saved { border-color: var(--accent-color); color: var(--accent-color); background: rgba(252,163,17,.1); }

/* ── Progress ── */
.pv-progress-track {
  height: 4px; border-radius: 2px;
  background: var(--border-color);
  overflow: hidden; flex-shrink: 0;
}
.pv-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
  transition: width .5s ease;
  border-radius: 2px;
}
.pv-progress-label {
  font-size: .72rem; color: var(--gray-color);
  text-align: right; flex-shrink: 0;
}

/* ── Reader card — takes ALL remaining height ── */
.pv-card {
  flex: 1;
  min-height: 0;                /* CRITICAL: allows flex child to shrink */
  display: flex;
  flex-direction: column;
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  overflow: hidden;
}

/* ── Viewport: fills card, image fits inside ── */
.pv-viewport {
  flex: 1;
  min-height: 0;                /* CRITICAL */
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-color);
  padding: 1rem;
}

/* THE KEY FIX:
   The img uses max-width + max-height relative to the viewport.
   At zoom=100% (scale 1) it fits completely — no scroll needed.
   Zooming in (scale > 1) makes the image grow beyond viewport → scroll kicks in.
*/
.pv-img {
  display: block;
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: auto;
  border-radius: 6px;
  box-shadow: 0 6px 24px rgba(0,0,0,.25);
  opacity: 0;
  /* transform (scale + rotate) applied inline */
  transform-origin: center center;
  transition: opacity .3s ease, transform .25s ease;
}
.pv-img.loaded { opacity: 1; }

/* Dark mode: white paper → readable on dark bg */
[data-theme="dark"] .pv-img { filter: invert(1) hue-rotate(180deg); }

/* Shimmer while loading */
.pv-shimmer {
  position: absolute; inset: 1rem;
  background: linear-gradient(90deg, var(--border-color) 25%, var(--light-color) 50%, var(--border-color) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.4s infinite;
  border-radius: 6px;
}

/* State (loading / error / empty) */
.pv-state {
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  gap: .75rem; text-align: center;
  color: var(--gray-color); font-size: .9rem;
  width: 100%;
}
.pv-state-icon { font-size: 2.5rem; line-height: 1; }
.pv-spinner {
  width: 36px; height: 36px;
  border: 4px solid var(--border-color);
  border-top-color: var(--primary-color);
  border-radius: 50%;
  animation: spin .8s linear infinite;
}

/* ── Bottom navigation strip ── */
.pv-bottom-nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: .6rem 1.25rem;
  border-top: 1px solid var(--border-color);
  background: var(--card-bg);
  flex-shrink: 0;
  gap: .5rem;
}
.pv-bottom-label { font-size: .85rem; color: var(--gray-color); }

/* ── Hint ── */
.pv-hint {
  text-align: center; font-size: .72rem;
  color: var(--gray-color); opacity: .6;
  margin: 0; flex-shrink: 0;
}

/* ── Toast ── */
.pv-toast {
  position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%);
  background: var(--secondary-color); color: #fff;
  padding: .6rem 1.4rem; border-radius: 50px;
  font: 500 .85rem/1 inherit;
  box-shadow: 0 6px 20px rgba(0,0,0,.25);
  z-index: 9999; pointer-events: none; white-space: nowrap;
  animation: toastUp .25s ease, toastOut .25s ease 2s forwards;
}
@keyframes toastUp  { from{opacity:0;transform:translateX(-50%) translateY(10px)} to{opacity:1;transform:translateX(-50%) translateY(0)} }
@keyframes toastOut { to { opacity: 0; } }


/* ================================================================
   RESPONSIVE
   ================================================================ */
@media (max-width: 900px) {
  .pv-bar { grid-template-columns: 1fr; gap: .5rem; }
  .pv-bar-left  { justify-content: space-between; }
  .pv-bar-nav   { justify-content: center; }
  .pv-bar-right { justify-content: space-between; width: 100%; }
}

@media (max-width: 768px) {
  .pv-shell { height: calc(100vh - 60px); padding: .625rem 0 .375rem; }
  .pv-bar   { padding: .5rem .875rem; border-radius: 10px; }
  .pv-card  { border-radius: 10px; }
  .pv-viewport { padding: .5rem; }
  .pv-bottom-nav { padding: .5rem .875rem; }
}

@media (max-width: 480px) {
  .pv-shell { padding: .4rem 0 .25rem; }
  .pv-back  { padding: .33rem .625rem; font-size: .8rem; }
  .pv-chip  { display: none; }
  .pv-zoom-val { display: none; }
}